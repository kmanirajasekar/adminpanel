import{g as x,l as y,m as b,o as n,c as r,a as s,w as c,v as d,F as u,f as m,u as p,h as $,d as N,p as U,t as _,j as V,i as C,q as B}from"./index-69f58c4e.js";import"./bootstrap.min-5bbf31fb.js";import{u as S,r as h,m as g}from"./index-525aea44.js";const D={class:"content-container login-container"},F=s("div",{class:"title-wrapper parent-page-title"},[s("div",{class:"login-title"},[s("h4",null,"Login")])],-1),R=s("hr",{class:"line"},null,-1),T={class:"content"},q={class:"form-container"},P={class:"row g-3"},j={class:"col-lg-21 col-md-12 col-sm-12"},E=s("label",{for:"user-name",class:"form-label"},"User Name",-1),I={class:"row g-3"},z={class:"col-lg-12 col-md-12 col-sm-12"},A=s("label",{for:"password",class:"form-label"},"Password",-1),G={class:"row"},H={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},J={class:"login-buttons"},K=["onClick"],O=s("span",null,"Login",-1),Q=[O],M={__name:"Login",setup(W){const t=x({username:"",password:""}),v={username:{required:h,minLength:g(4)},password:{required:h,minLength:g(6)}},l=S(v,t),w=y(),f=async()=>{var i,e;if(!await l.value.$validate())return;const a=C();try{const o=await B.login({userName:t.username,password:t.password});if(o.status===200&&o.data){localStorage.setItem("token",o.data),k(),l.value.$reset(),w.push({name:"view-profile"});return}a.error("Username or password is incorrect.")}catch(o){if(((i=o==null?void 0:o.response)==null?void 0:i.status)===204||((e=o==null?void 0:o.response)==null?void 0:e.status)===401){a.error("Username or password is incorrect.");return}a.error("Something went wrong")}},k=()=>{t.username=t.password=""};return(L,a)=>{const i=b("RouterLink");return n(),r("div",D,[F,R,s("div",T,[s("div",q,[s("div",P,[s("div",j,[E,c(s("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>t.username=e),type:"text",id:"user-name",class:"form-control",placeholder:"User Name",maxlength:"25"},null,512),[[d,t.username]]),(n(!0),r(u,null,m(p(l).username.$errors,e=>(n(),r("span",{class:"validation-error",key:e.$uid},_(e.$message),1))),128))])]),s("div",I,[s("div",z,[A,c(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>t.password=e),type:"password",id:"password",class:"form-control",placeholder:"Password",maxlength:"25"},null,512),[[d,t.password]]),(n(!0),r(u,null,m(p(l).password.$errors,e=>(n(),r("span",{class:"validation-error",key:e.$uid},_(e.$message),1))),128))])]),s("div",G,[s("div",H,[s("div",J,[s("button",{class:"btn btn-login",onClick:$(f,["prevent"])},Q,8,K),N(i,{to:"/",class:"back-home"},{default:U(()=>[V(" Back to home page ")]),_:1})])])])])])])}}};export{M as default};
